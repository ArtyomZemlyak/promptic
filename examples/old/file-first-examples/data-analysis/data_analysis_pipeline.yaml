name: Data Analysis Pipeline
prompt_template: >
  You are a data analyst. Your task is to process datasets, identify patterns,
  and generate actionable insights through systematic analysis.
settings:
  instruction_root: instructions
  adapter_defaults:
    csv_loader:
      path: data/datasets.csv
    json_loader:
      path: data/config.json
global_instructions:
  - instruction_id: analysis_principles
steps:
  - step_id: load_data
    title: Load and Validate Data
    kind: sequence
    instruction_refs:
      - instruction_id: load_data_step
    children:
      - step_id: validate_schema
        title: Validate Data Schema
        kind: sequence
        instruction_refs:
          - instruction_id: validate_schema_step
      - step_id: check_quality
        title: Check Data Quality
        kind: sequence
        instruction_refs:
          - instruction_id: check_quality_step
  - step_id: explore_data
    title: Exploratory Data Analysis
    kind: sequence
    instruction_refs:
      - instruction_id: explore_data_step
    children:
      - step_id: compute_statistics
        title: Compute Descriptive Statistics
        kind: sequence
        instruction_refs:
          - instruction_id: compute_statistics_step
      - step_id: visualize_distributions
        title: Visualize Distributions
        kind: sequence
        instruction_refs:
          - instruction_id: visualize_distributions_step
      - step_id: identify_outliers
        title: Identify Outliers
        kind: sequence
        instruction_refs:
          - instruction_id: identify_outliers_step
  - step_id: process_features
    title: Feature Engineering
    kind: loop
    loop_slot: features
    instruction_refs:
      - instruction_id: process_features_step
    children:
      - step_id: transform_feature
        title: Transform Feature
        kind: sequence
        instruction_refs:
          - instruction_id: transform_feature_step
      - step_id: validate_feature
        title: Validate Feature
        kind: sequence
        instruction_refs:
          - instruction_id: validate_feature_step
  - step_id: analyze_patterns
    title: Pattern Analysis
    kind: sequence
    instruction_refs:
      - instruction_id: analyze_patterns_step
    children:
      - step_id: correlation_analysis
        title: Correlation Analysis
        kind: sequence
        instruction_refs:
          - instruction_id: correlation_analysis_step
      - step_id: trend_analysis
        title: Trend Analysis
        kind: sequence
        instruction_refs:
          - instruction_id: trend_analysis_step
  - step_id: generate_insights
    title: Generate Insights and Recommendations
    kind: sequence
    instruction_refs:
      - instruction_id: generate_insights_step
    children:
      - step_id: synthesize_findings
        title: Synthesize Findings
        kind: sequence
        instruction_refs:
          - instruction_id: synthesize_findings_step
      - step_id: create_recommendations
        title: Create Actionable Recommendations
        kind: sequence
        instruction_refs:
          - instruction_id: create_recommendations_step
data_slots:
  - name: datasets
    adapter_key: csv_loader
    schema:
      type: array
      items:
        type: object
        properties:
          name: {type: string}
          path: {type: string}
          format: {type: string, enum: [csv, json, parquet]}
          size: {type: string}
  - name: features
    adapter_key: json_loader
    schema:
      type: array
      items:
        type: object
        properties:
          name: {type: string}
          type: {type: string}
          transformation: {type: string}
memory_slots:
  - name: analysis_history
    provider_key: vector_db
  - name: feature_registry
    provider_key: vector_db
