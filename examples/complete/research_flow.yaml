name: Research Flow
prompt_template: >
  You are a structured research assistant. Analyze sources systematically
  and produce comprehensive summaries with proper citations.
settings:
  instruction_root: instructions
  adapter_defaults:
    csv_loader:
      path: data/sources.csv
global_instructions:
  - instruction_id: root_guidance
steps:
  - step_id: collect
    title: Collect Sources
    kind: loop
    loop_slot: sources
    instruction_refs:
      - instruction_id: collect_step
    children:
      - step_id: summarize
        title: Summarize Source
        kind: sequence
        instruction_refs:
          - instruction_id: summarize_step
      - step_id: validate
        title: Validate Source
        kind: sequence
        instruction_refs:
          - instruction_id: validate_step
  - step_id: synthesize
    title: Synthesize Findings
    kind: sequence
    instruction_refs:
      - instruction_id: synthesize_step
data_slots:
  - name: sources
    adapter_key: csv_loader
    schema:
      type: array
      items:
        type: object
        properties:
          title: {type: string}
          url: {type: string}
          author: {type: string}
memory_slots:
  - name: prior_findings
    provider_key: vector_db
